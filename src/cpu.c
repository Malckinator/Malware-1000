#include "../include/cpu.h"

bool HasPermission(MW1000* cpu, DWORD addr) {
	for (char i = 0; i < 4; i++) {
		if (cpu->permTables[i].permLevel < cpu->permission)
			if (cpu->permTables[i].start < cpu->pc && cpu->pc < cpu->permTables[i].start + cpu->permTables[i].size)
				return false;
	}

	return true;
}

char ReadMemory(MW1000* cpu, DWORD addr) {
	if (addr < cpu->memSize)
		return cpu->memory[addr];
	else
		error = true;
}

void WriteMemory(MW1000* cpu, DWORD addr, char value) {
	if (addr < cpu->memSize && addr > cpu->romSize && HasPermission(cpu, addr))
		cpu->memory[addr] = value;
	else
		error = true;
}

void RunInstruction(MW1000* cpu) {
	
}