#include <stdio.h>

#include "../include/cpu.h"
#include "../include/bus.h"

int main() {
	MW1000* cpu = CreateMW1000(NULL);
	do {
		printf("\n\nPC = %08xh|SP = %08xh\n\nA = %08xh|B = %08xh|C = %08xh|D = %08xh\nE = %08xh|F = %08xh|G = %08xh|H = %08xh\nI = %08xh|J = %08xh|K = %08xh|L = %08xh\nM = %08xh|N = %08xh|O = %08xh|P = %08xh\nC = %d|Z = %d|O = %d|I = %d|D = %d|S = %d|P = %d",
        cpu->pc, cpu->sp, cpu->gpregs[0], cpu->gpregs[1],
        cpu->gpregs[2], cpu->gpregs[3], cpu->gpregs[4], cpu->gpregs[5],
        cpu->gpregs[6], cpu->gpregs[7], cpu->gpregs[8], cpu->gpregs[9],
        cpu->gpregs[10], cpu->gpregs[11], cpu->gpregs[12], cpu->gpregs[13],
        cpu->gpregs[14], cpu->gpregs[15], cpu->status.cFlag, cpu->status.zFlag,
        cpu->status.oFlag, cpu->status.iFlag, cpu->status.dFlag, cpu->status.sFlag,
        cpu->status.pFlag);
		getc(stdin);
	} while (RunInstruction(cpu));
}
