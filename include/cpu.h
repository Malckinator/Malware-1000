#ifndef CPU_H
#define CPU_H

#include <stdint.h>
#include <stdbool.h>

typedef uint32_t DWORD;

bool error = false;

typedef struct PermTableStruct {
	char permLevel;
	DWORD start;
	DWORD size;
} PermTable;

typedef struct MW1000Struct {
	// Memory
	char* memory;
	int memSize;
	int romSize;
	PermTable permTables[4];

	// Registers
	DWORD io[16];
	DWORD registers[16];
	DWORD pc;
	DWORD sp;
	char permission;

	// Status Flags
	char cFlag;
	char zFlag;
	char oFlag;
	char iFlag;
	char sFlag;
} MW1000;

bool HasPermission(MW1000* cpu, DWORD addr);
char ReadMemory(MW1000* cpu, DWORD addr);
void WriteMemory(MW1000* cpu, DWORD addr, char value);
void RunInstruction(MW1000* cpu);

#endif